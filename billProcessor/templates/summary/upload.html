{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Upload statement{% endblock %}</h1>

<script>
function validateForm() {
    var type = document.forms["uploadForm"]["type"].value;
    var data = document.forms["uploadForm"]["data"].value;
    if (type == "") {
        alert("Please select a statement type.");
        return false;
    }
    if (data == "") {
        alert("Please paste some data to upload.");
        return false;
    }
}
function displayMonthYear() {
    var m = document.getElementById("month");
    var y = document.getElementById("year");
    m.style.display = "block";
    y.style.display = "block";
}
</script>
{% endblock %}

{% block content %}
  <form name="uploadForm" method="post" action="{{ url_for('summary.process_upload') }}" onsubmit="return validateForm()">
    <div>
      <label for="type">Statement Type:</label>
      <select name="type" onchange="displayMonthYear()">
        <option value="" selected disabled hidden>Choose...</option>
      {% for t in types %}
        <option value="{{ t['enum'] }}">{{ t['description'] }}</option>
      {% endfor %}
      </select>
    </div>
    <div style="display: none;" id="month">
      <label for="month">Month:</label>
      <select name="month">
        <option value="" selected disabled hidden>...</option>
      {% for d in range(1, 13) %}
        <option value="{{ d }}">{{ d }}</option>
      {% endfor %}
      </select>
    </div>
    <div style="display: none;" id="year">
      <label for="year">Year:</label>
      <select name="year">
        <option value="" selected disabled hidden>...</option>
      {% for y in range(2017, 2021) %}
        <option value="{{ y }}">{{ y }}</option>
      {% endfor %}
      </select>
    </div>
    <br/>
    <label for="data">Data Input:</label>
    <br/>
    <textarea rows="10" cols="100" name="data" placeholder="Paste statement data here..."></textarea>
    <br/>
    <input type="submit" value="Upload">
  </form>
{% endblock %}
